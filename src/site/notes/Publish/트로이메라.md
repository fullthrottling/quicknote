---
{"dg-publish":true,"permalink":"/Publish/트로이메라/","tags":["gardenEntry"]}
---

# 조건 -
## **주어진 조건 요약:**

1. **획득 확률:** 각 시도마다 아이템을 획득할 확률이 **1% (0.01)** 입니다.
2. **피티 시스템:** **100번의 시도** 내에 아이템을 획득하지 못하면 **무조건 1개**를 획득하게 됩니다.
3. **시도 초기화:** 아이템을 획득하면, 누적 시도 횟수가 **초기화**됩니다.
4. **목표:** 22개의 아이템을 획득하기 위한 **총 평균 시도 횟수**를 계산하고자 합니다.

# 계산 과정

## 1. 기하분포의 부분 합

하나의 아이템을 획득할 확률이 \(1\%\) (\(p = 0.01\))이고, 최대 99번의 시도 내에 아이템을 획득하지 못하면 100번째 시도에서 무조건 1개를 얻는 상황을 고려합니다. 시도 횟수가 초기화되지 않는 경우, 기대값을 계산해보겠습니다.

$$
\sum_{k=1}^{99} k \cdot 0.99^{k-1} \cdot 0.01 = 0.01 \cdot \sum_{k=1}^{99} k \cdot 0.99^{k-1}
$$

이 부분 합은 다음과 같은 공식으로 계산할 수 있습니다:

$$
\sum_{k=1}^{n} k \cdot q^{k-1} = \frac{1 - (n+1)q^n + nq^{n+1}}{(1 - q)^2}
$$

여기서 \( q = 0.99 \), \( n = 99 \)입니다.

$$
\sum_{k=1}^{99} k \cdot 0.99^{k-1} = \frac{1 - 100 \cdot 0.99^{99} + 99 \cdot 0.99^{100}}{(1 - 0.99)^2} = \frac{1 - 100 \cdot 0.99^{99} + 99 \cdot 0.99^{100}}{0.0001} = 100 \cdot \left(1 - 100 \cdot 0.99^{99} + 99 \cdot 0.99^{100}\right)
$$

## 2. 전체 기대값 ( *E 총* )

전체 기대값 \( E \)는 다음과 같이 계산됩니다:


$$
E = 0.01 \cdot 100 \cdot \left(1 - 100 \cdot 0.99^{99} + 99 \cdot 0.99^{100}\right) + 100 \cdot 0.99^{99}
$$

이를 전개하면:

$$
E = \left(1\right) \cdot \left(1 - 100 \cdot 0.99^{99} + 99 \cdot 0.99^{100}\right) + 100 \cdot 0.99^{99}
$$

$$
E = 1 - 100 \cdot 0.99^{99} + 99 \cdot 0.99^{100} + 100 \cdot 0.99^{99}
$$

$$
E = 1 - 0.99^{99} + 99 \cdot 0.99^{100}
$$

계산을 진행하면:

$$
E \approx 1 - 0.3660323413 + 99 \cdot 0.3623717416
$$

$$
E \approx 1 - 0.3660323413 + 35.8807024184
$$

$$
E \approx 1 - 0.3660323413 + 35.8807024184 = 36.5146700771
$$

또는,

$$
E = 100 \cdot \left(1 - 0.99^{100}\right) \approx 63.3967 \text{번}
$$

따라서, **하나의 아이템을 획득하기 위한 평균 시도 횟수는 약 63.4번**입니다.

## 3. 22개의 아이템을 획득하기 위한 총 평균 시도 횟수 

하나의 아이템을 획득하기 위한 평균 시도 횟수 \( E \)가 약 **63.4번**이므로, 22개의 아이템을 획득하기 위한 총 평균 시도 횟수는:

$$
E_{\text{총}} = 22 \times 63.4 \approx 1,394.8 \text{번}
$$

따라서, **22개의 아이템을 획득하기 위한 총 평균 시도 횟수는 약 1,395번**입니다.

---

## 요약

- **하나의 아이템을 획득하기 위한 평균 시도 횟수**: 약 **63.4번**
- **22개의 아이템을 획득하기 위한 총 평균 시도 횟수**: 약 **1,395번**

---

## 추가 설명

### 피티 시스템의 영향

- **피티 시스템** 덕분에, 긴 시도 후에도 아이템을 얻을 수 있어, 기하분포의 기대값보다 낮은 시도 횟수로 아이템을 획득할 수 있습니다.
- 이는 **획득 실패 시 자동으로 아이템을 보장**받기 때문에 전체적인 기대값을 감소시킵니다.

### 시도 카운트 초기화 여부의 영향

- **시도 카운트 초기화 시**: 아이템을 획득할 때마다 시도 카운트가 초기화되어, 각 아이템 획득이 독립적인 과정이 됩니다. 이 경우, 하나의 아이템을 얻기 위한 평균 시도 횟수는 약 **63.4번**입니다.
  
- **시도 카운트 초기화 미적용 시**: 아이템을 획득해도 시도 카운트가 계속 증가하여, 100번의 시도마다 무조건 1개의 아이템을 획득하게 됩니다. 이 경우, 하나의 아이템을 획득하기 위한 평균 시도 횟수는 약 **50번**이 됩니다. (계산 과정은 이전 메시지에서 제공된 바와 같습니다.)

---

## 참고 사항

- **확률 계산**은 이론적인 기대값을 기반으로 합니다. 실제 시도에서는 확률의 변동성으로 인해 약간의 차이가 있을 수 있습니다.
- **게임이나 시스템의 추가 규칙**(예: 보너스 확률, 추가 보상 등)이 있다면, 계산된 기대값과 실제 결과가 다를 수 있습니다.

---
